<?xml version="1.0"?>
<block>
	<name>Matlab Mat Source</name>
	<key>iio_matlab_source</key>
	<category>Matlab</category>
	<import>from gnuradio import iio</import>
	<import>import scipy.io as sio</import>
	<make>iio.matlab_source($filename)</make>

	<param>
		<name>File</name>
		<key>filename</key>
		<value></value>
		<type>file_open</type>
		<hide>none</hide>
	</param>

	<source>
		<name>out</name>
		<type>#import scipy.io as sio
#import numpy
#set $mat_info = $sio.whosmat($filename())
#set $mat = $sio.loadmat($filename())
#set $mat_type = type($mat[$mat_info[0][0]][0][0])
#if $mat_type == numpy.complex128
fc64#slurp
#elif $mat_type == numpy.complex64
fc32#slurp
#elif $mat_type == numpy.float64
f64#slurp
#elif $mat_type == numpy.float32
f32#slurp
#elif $mat_type == numpy.int64
s64#slurp
#elif $mat_type == numpy.int32
s32#slurp
#elif $mat_type == numpy.int16
s16#slurp
#elif $mat_type == numpy.int8
s8#slurp
#else
raw#slurp
#end if
</type>
	<nports>len(sio.whosmat($filename))</nports>
	</source>
</block>
